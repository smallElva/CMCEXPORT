{"version":3,"sources":["webpack:///src/components/content/system/folder/FolderTable.vue","webpack:///./src/components/content/system/folder/FolderTable.vue?330e","webpack:///./src/components/content/system/folder/FolderTable.vue","webpack:///./src/components/content/system/folder/FolderTable.vue?84ec","webpack:///./src/components/content/system/folder/FolderTable.vue?6562","webpack:///./src/components/content/system/folder/table/folder_hdtable.js","webpack:///./src/components/content/system/folder/table/folder_info.js","webpack:///./src/components/content/system/folder/table/folder_methods.js"],"names":["colWidth","folderhdtable","el","property","data","getData","tableDataIns","tableData","vibTable","contextMenu","colHeaders","columns","cells","afterOnCellMouseUp","afterFilter","afterCreateRow","beforeChange","afterChange","beforeRemoveRow","afterRemoveRow","afterColumnResize","length","colWidths","hdtable","vm","getHot","folderList","folderArray","changeDataList","deleteIdList","store","$store","reRenderSelectOption","reload","that","items","name","callback","key","options","addRows","start","row","swal","title","text","buttons","sure","cancel","dangerMode","then","willDelete","forEach","option","index","amount","parseInt","end","alter","editor","selectOptions","t_pName_sources","readOnly","t_root_sources","col","prop","cellProperties","operate","condition","hot","getColWidth","t_ids","view","wt","wtOverlays","adjustElementsSize","console","log","item","column","conditions","filterItem","filterFolders","args","filterName","folder","t_name","push","t_id","toString","sessionStorage","setItem","JSON","stringify","commit","parse","getItem","getApi","getAllTRoot","state","tids","res","undefined","msg","tRoot","t_root","err","e","coords","td","row_info","getRowInfoByIndex","source","createFolder","update_t_pName_sources","changes","change_index","change_prop","change_oldVal","change_newVal","folder_nameList","i","physicalRow","toPhysicalRow","columnVal","propToCol","indexOf","button","t_pName","t_pid","find_key","t_root_sources_key","t_root_val","setCellMeta","change","sendFolder","changFolderInfo","cids","count","deleteFolder","value","fol","includes","unshift","getFolderInfo","folderTree","translateTree","sort_folder","sort_folder_2","updateTime","Object","values","keys","baseInfo","Number","sortFolder","find_folderSource","children","sort_p_sources","pids","dataArray","j","splice","newRow","isnew","cellMeta","getCellMetaAtRow","rows"],"mappings":"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","file":"js/47-9e7b6cb0.js","sourcesContent":["<template>\r\n    <div class=\"myTable\">\r\n        <button class=\"my-btn btn-active white-btn btn1\" @click=\"addRows();\">新建组织</button>\r\n        <button class=\"my-btn btn-active btn2\" @click=\"save();\">保存设置</button>\r\n        <div id=\"HotTable\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import folderhdtable from './table/folder_hdtable.js'\r\n    import {getFolderInfo} from './table/folder_info.js'\r\n    import {addRows,reRenderSelectOption} from './table/folder_methods'\r\n    export default {\r\n        name: \"FolderTable\",\r\n        props:[],\r\n        inject: ['reload'],\r\n        data(){\r\n            return{\r\n                data:[],\r\n                hot:{},//hottable对象\r\n                folderList:{},//所有组织的集合 name索引\r\n                folderArray:[],//用于遍历不同组织类型（风电、水泥、）\r\n                changeDataList:{},//修改+新增的组织\r\n                deleteIdList: [],//删除的数据\r\n                scroll:0,//滚动距离\r\n            }\r\n        },\r\n        mounted(){\r\n           // 在点击标题的时候放大并重新渲染表格\r\n          this.$bus.$on('reloadtable',()=>{\r\n              this.hot.render()\r\n          })\r\n            this.getListData();//获取所有的机组设置数据\r\n        },\r\n        beforeRouteLeave (to, from, next) {\r\n            let changeData = this.changeDataList;\r\n            let that = this;\r\n            if(!$.isEmptyObject(changeData)){\r\n                swal({\r\n                    title: \"警告\",\r\n                    text: \"正在离开本页面，本页面内所有未保存数据都会丢失。\",\r\n                    buttons: {\r\n                        sure: \"确认\",\r\n                        cancel: \"取消\",\r\n                    },\r\n                    dangerMode: true,\r\n                })\r\n                    .then((willDelete) => {\r\n                        if (willDelete) {\r\n                            that.changeDataList={};\r\n                            next();\r\n                        } else {\r\n                            window.history.go(1);\r\n                        }\r\n                    });\r\n            }\r\n            else{\r\n                next();\r\n            }\r\n        },\r\n        methods: {\r\n            getListData() {\r\n                this.$getApi.queryAllFolder(this.$store.state.origTids)\r\n                .then(res=>{\r\n\r\n                  [this.folderList,this.folderArray,this.data] = getFolderInfo(res);\r\n                  if(this.folderArray.length > 0){\r\n                      this.$store.commit('setTreeTid', this.folderArray[0].t_id);\r\n                  }\r\n                  else{\r\n                      this.$store.commit('setTreeTid', '-1');\r\n                  }\r\n                  this.renderTable()\r\n                })\r\n                    .catch(err=>{\r\n                        console.log('请求错误' ,err)\r\n                    })\r\n            },\r\n            renderTable(){\r\n                let HotTable = document.getElementById('HotTable');\r\n                this.hot = new folderhdtable(HotTable,this)\r\n                reRenderSelectOption(this.hot,this.data)\r\n            },\r\n\r\n             //获取data\r\n            getData(){\r\n              return this.data\r\n            },\r\n            getHot(){\r\n              return this.hot\r\n            },\r\n\r\n            addRows(){//新增行\r\n               return addRows(this.hot,this.data,-1)\r\n            },\r\n            getTroot(){\r\n                this.$getApi.getAllTRoot(this.$store.state.tids)\r\n                    .then(res=> {\r\n                        if (res !== undefined && res.msg !== undefined && res.msg === 0) {\r\n                            let tRoot = res.t_root;\r\n                            if(tRoot && tRoot.length){\r\n                                sessionStorage.setItem('tRootList',JSON.stringify(tRoot));\r\n                            }\r\n                            else{\r\n                                sessionStorage.setItem('tRootList',JSON.stringify([]));\r\n                            }\r\n                        }\r\n                    }).catch(err => {\r\n                    console.log(err)\r\n                    sessionStorage.setItem('tRootList',JSON.stringify([]));\r\n                });\r\n            },\r\n            save() {//保存组织\r\n              let that = this;\r\n              if(!$.isEmptyObject(that.changeDataList)){\r\n                  let flag = this.check(that.changeDataList)\r\n                  if(flag){\r\n                    this.changeDataList.t_ids = this.$store.state.tids;\r\n                    this.$axios.post('saveNewFolder',that.changeDataList)\r\n                      .then(res=>{\r\n                          this.changeDataList={};//修改的和新增的数组集合\r\n                          if(res.msg==0){\r\n                            swal({\r\n                              title: \"提示\",\r\n                              text: `保存成功`,\r\n                              button: \"确认\"\r\n                            })\r\n                            .then((value) => {\r\n                               this.reload()\r\n                              // this.$router.go(0)\r\n                            });\r\n                          }\r\n                          else if(res.msg==1){\r\n                              console.log('参数为空！');\r\n                          }\r\n                          else if(res.msg==2){\r\n                              console.log('后台运行错误！');\r\n                          }\r\n                          that.getTroot();//更新t_root\r\n                    })\r\n                        .catch(err=>{\r\n                            console.log('请求错误',err)\r\n                        })\r\n                  }\r\n              }else{\r\n                 swal({\r\n                    title: \"提示\",\r\n                    text: `保存成功`,\r\n                    button: \"确认\"\r\n                  })\r\n                  .then((value) => {\r\n                    this.$router.go(0)\r\n                  });\r\n              }\r\n            },\r\n            check(folder_list){\r\n              for(let key in folder_list ){\r\n\r\n                if( folder_list[key].t_name === \"\"){\r\n                  swal({\r\n                    title: \"提示\",\r\n                    text: `存在组织未设置组织名`,\r\n                    button: \"确认\"\r\n                  })\r\n                  return false\r\n                }else if( folder_list[key].t_pid === \"\" ){ /* 创建的时候默认给了上级组织 */\r\n                  swal({\r\n                    title: \"提示\",\r\n                    text: `存在组织未设置上级组织`,\r\n                    button: \"确认\"\r\n                  })\r\n                  return false\r\n                }\r\n              }\r\n              return true\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"myTable\" }, [\n    _c(\n      \"button\",\n      {\n        staticClass: \"my-btn btn-active white-btn btn1\",\n        on: {\n          click: function($event) {\n            return _vm.addRows()\n          }\n        }\n      },\n      [_vm._v(\"新建组织\")]\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"button\",\n      {\n        staticClass: \"my-btn btn-active btn2\",\n        on: {\n          click: function($event) {\n            return _vm.save()\n          }\n        }\n      },\n      [_vm._v(\"保存设置\")]\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", { attrs: { id: \"HotTable\" } })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./FolderTable.vue?vue&type=template&id=3bf57129&scoped=true&\"\nimport script from \"./FolderTable.vue?vue&type=script&lang=js&\"\nexport * from \"./FolderTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf57129\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\工作\\\\CCCCCCCCCC\\\\node_modules\\\\_vue-hot-reload-api@2.3.4@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3bf57129')) {\n      api.createRecord('3bf57129', component.options)\n    } else {\n      api.reload('3bf57129', component.options)\n    }\n    module.hot.accept(\"./FolderTable.vue?vue&type=template&id=3bf57129&scoped=true&\", function () {\n      api.rerender('3bf57129', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/content/system/folder/FolderTable.vue\"\nexport default component.exports","import mod from \"-!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./FolderTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./FolderTable.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./FolderTable.vue?vue&type=template&id=3bf57129&scoped=true&\"","import getApi from 'network/getApi'\r\nimport hdtable from 'common/hdtable.js'\r\nimport {createFolder,changFolderInfo} from './folder_info.js'\r\nimport {addRows} from './folder_methods.js'\r\nimport {find_key,getRowInfoByIndex} from 'utils/utils'\r\n\r\nlet colWidth = '';\r\n\r\nexport default function folderhdtable(el,property){\r\n  // console.log(new Handsontable());\r\n    let data = property.getData()\r\n    //创建表格属性的实例\r\n    let tableDataIns= new tableData(property)\r\n    // 组装振动表格数据\r\n    let vibTable ={\r\n\r\n      // 表格右键菜单\r\n      contextMenu:tableDataIns.contextMenu(),\r\n      // 表格显示的数据\r\n      data:data,\r\n      //表格的列\r\n      colHeaders:tableDataIns.colHeaders(),\r\n\r\n      //数据渲染renderData\r\n      columns:tableDataIns.columns(),\r\n\r\n      // //单元格属性设置\r\n      cells:tableDataIns.cells(),\r\n      // //单击单元格或行/列标题后触发。如果单击行/列标题，则坐标索引为负。\r\n      afterOnCellMouseUp:tableDataIns.afterOnCellMouseUp(),\r\n      //过滤之后\r\n      afterFilter:tableDataIns.afterFilter(),\r\n      // //新建行\r\n      afterCreateRow:tableDataIns.afterCreateRow(),\r\n\r\n      beforeChange: tableDataIns.beforeChange(),\r\n\r\n      afterChange: tableDataIns.afterChange(),\r\n      // //移除行事件\r\n      beforeRemoveRow:tableDataIns.beforeRemoveRow(),\r\n\r\n      afterRemoveRow:tableDataIns.afterRemoveRow(),\r\n      //列宽改变\r\n      afterColumnResize:tableDataIns.afterColumnResize(),\r\n    }\r\n    /**列宽设置**/\r\n    //默认情况下自适应\r\n    if(data.length===0){//如果表格没有数据，设置默认宽度，以免表头挤在一起\r\n      vibTable.colWidths = '170';\r\n    }\r\n    else if(data.length && colWidth!==''){//如果有数据，且拖动表格列宽的情况下，保存为拖动后的列宽\r\n      vibTable.colWidths = colWidth;\r\n    }\r\n    return hdtable(el,vibTable)\r\n}\r\n\r\nclass tableData{\r\n  constructor(vm){\r\n    this.getData= vm.getData\r\n    this.getHot = vm.getHot\r\n    this.folderList=vm.folderList\r\n    this.folderArray= vm.folderArray\r\n    this.changeDataList = vm.changeDataList\r\n    this.deleteIdList= vm.deleteIdList\r\n    this.store = vm.$store,\r\n    this.reRenderSelectOption = vm.reRenderSelectOption\r\n    this.reload = vm.reload\r\n  }\r\n  contextMenu(){\r\n    let that = this;\r\n    return {\r\n      items:{\r\n        \"row_above\":{\r\n          name:\"上方新建\",\r\n          callback(key, options) {\r\n            addRows(that.getHot(),that.getData(),options[0].start.row)\r\n          },\r\n        },\r\n        \"remove_row\": {\r\n          name: '删除这行',\r\n          callback(key, options) {\r\n            swal({\r\n              title: \"警告\",\r\n              text: \"一旦删除，该组织数据将不保留！！！确定删除吗?\",\r\n              buttons: {\r\n                sure: \"确认\",\r\n                cancel: \"取消\",\r\n              },\r\n              dangerMode: true,\r\n            })\r\n                .then((willDelete) => {\r\n                  if (willDelete) {\r\n                    options.forEach(option =>{\r\n                      let index = option.start.row;\r\n                      let amount = parseInt(option.end.row-option.start.row) + 1;\r\n                      that.getHot().alter(\"remove_row\",index,amount);\r\n                    })\r\n                  } else {\r\n                    return false;\r\n                  }\r\n                });\r\n          },\r\n        },\r\n      }\r\n    }\r\n  }\r\n  colHeaders(){   // 使用自定义列头\r\n    return['组织名称', '隶属组织','组织类型']\r\n  }\r\n   // 表格显示的数据\r\n  columns(){\r\n    return[\r\n      {\r\n        data: 't_name',\r\n\r\n      },\r\n      {\r\n          data: 't_pName',\r\n          editor: 'select',\r\n          selectOptions: row=> this.getData()[row].t_pName_sources\r\n      },\r\n      {\r\n        data: 't_root_val',\r\n        editor: 'select',\r\n        readOnly:true,\r\n        selectOptions: row => this.getData()[row].t_root_sources\r\n      }]\r\n  }\r\n  cells(){\r\n    let that = this\r\n    return function (row, col, prop){\r\n      let data =that.getData()\r\n          if(data.length == 0) return\r\n\r\n          let cellProperties = this;\r\n\r\n          if(row!=-1 && data[row].operate == 1 && (col == 2)){ //新建测点的组织、机组、采集器可以编辑\r\n              cellProperties.readOnly  = false;\r\n          }\r\n    }\r\n  }\r\n  // 列宽被改变后\r\n  afterColumnResize(){\r\n    let that = this;\r\n    return function(condition){\r\n      let hot = that.getHot();\r\n      colWidth = hot.getColWidth(condition);//修改拖动后的列宽\r\n    }\r\n  }\r\n// 过滤的方法(有待优化)（共用）\r\n  afterFilter(){\r\n    let that = this;\r\n    let t_ids=[];\r\n    return function(condition){\r\n      let hot = that.getHot();\r\n      hot.view.wt.wtOverlays.adjustElementsSize(true);\r\n      console.log(condition)\r\n      condition.forEach(item => {\r\n        if (item.column===0) { /* 如果过滤的是组织 */\r\n          let conditions = item.conditions;\r\n          conditions.forEach(filterItem=>{\r\n            let filterFolders = filterItem.args[0];\r\n            filterFolders.forEach(filterName=>{\r\n              that.folderArray.forEach(folder=>{\r\n                if(folder.t_name==filterName){\r\n                  t_ids.push(folder.t_id.toString());\r\n                }\r\n              })\r\n            })\r\n          })\r\n\r\n        }\r\n      });\r\n      /*过滤组织，将其他界面的可展示组织进行过滤*/\r\n      sessionStorage.setItem('getTidList', JSON.stringify(t_ids));\r\n      that.store.commit('setTids', JSON.parse(sessionStorage.getItem('getTidList')));\r\n      getApi.getAllTRoot(that.store.state.tids)\r\n          .then(res=> {\r\n            if (res !== undefined && res.msg !== undefined && res.msg === 0) {\r\n              let tRoot = res.t_root;\r\n              if(tRoot && tRoot.length){\r\n                sessionStorage.setItem('tRootList',JSON.stringify(tRoot));\r\n              }\r\n              else{\r\n                sessionStorage.setItem('tRootList',JSON.stringify([]));\r\n              }\r\n            }\r\n          }).catch(err => {\r\n        console.log(err)\r\n      });\r\n    }\r\n  }\r\n  afterOnCellMouseUp(){\r\n    let that = this\r\n    return function (e, coords, td){\r\n\r\n      if(coords.row>=0){\r\n        let row_info =getRowInfoByIndex(coords.row,that.getData(),that.getHot())\r\n        that.store.commit('setTreeTid', row_info.t_id);\r\n      }\r\n    }\r\n  }\r\n  afterCreateRow(){//添加行事件\r\n    let that =this\r\n    return function(index,amount,source){//添加行事件\r\n\r\n      let data = that.getData()\r\n      let folder = createFolder(data.length)\r\n      that.update_t_pName_sources(folder)\r\n      that.changeDataList[folder.t_id] = folder\r\n      data[index] = folder\r\n    }\r\n  }\r\n\r\n   //改变数据的时候拼装数据结构（共用）\r\n  beforeChange(){\r\n    let that =this\r\n    return function (changes,source){\r\n        let data = that.getData();\r\n        let hot = that.getHot();\r\n        let change_index\r\n        let change_prop\r\n        let change_oldVal\r\n        let change_newVal\r\n\r\n        let folder_nameList =[]\r\n        data.forEach(folder=>{\r\n          if(folder.t_name){\r\n            folder_nameList.push(folder.t_name)\r\n          }\r\n        })\r\n        //创建更改组织、机组、采集器、通道、任务的联动实例\r\n\r\n        for(let i= 0;i<changes.length;i++){\r\n          let physicalRow = hot.toPhysicalRow(changes[i][0]);\r\n          let columnVal = hot.propToCol(changes[i][1]);\r\n          change_index = changes[i][0]\r\n          change_prop = changes[i][1]\r\n          change_oldVal = changes[i][2]\r\n          change_newVal = changes[i][3]\r\n          if(change_oldVal == change_newVal ){\r\n            continue\r\n          }\r\n          let folder=getRowInfoByIndex(change_index,data,that.getHot())\r\n           if(change_prop==\"t_name\"){   //组织名称\r\n            if(folder_nameList.indexOf(change_newVal) != -1){\r\n              swal({\r\n                title: \"提示\",\r\n                text: `第${change_index + 1}行组织重名`,\r\n                button: \"确认\"\r\n              })\r\n              return false\r\n            }else{\r\n              folder.t_name = change_newVal\r\n            }\r\n          }\r\n          if(change_prop==\"t_pName\"){ //隶属组织\r\n            let t_pName_sources = folder.t_pName_sources\r\n            if(t_pName_sources.indexOf(change_newVal) == -1){\r\n              swal({\r\n                title: \"提示\",\r\n                text: `第${change_index + 1}行不存在该组织`,\r\n                button: \"确认\"\r\n              })\r\n              return false\r\n            }else{\r\n              folder.t_pName =  change_newVal\r\n              folder.t_pid = that.folderList[change_newVal].t_id\r\n            }\r\n          }\r\n          if(change_prop==\"t_root_val\"){ //组织类型\r\n            let t_root_sources = folder.t_root_sources\r\n            if(t_root_sources.indexOf(change_newVal) == -1){\r\n              swal({\r\n                title: \"提示\",\r\n                text: `第${change_index + 1}行不存在该组织类型`,\r\n                button: \"确认\"\r\n              })\r\n              return false\r\n            }else{\r\n              folder.t_root = find_key(change_newVal,folder.t_root_sources,folder.t_root_sources_key)\r\n              folder.t_root_val = change_newVal\r\n              that.update_t_pName_sources(folder)\r\n            }\r\n          }\r\n          hot.setCellMeta(physicalRow, columnVal, 'className', 'red-color');\r\n        }\r\n    }\r\n  }\r\n   //改变数据后的方法 （共用）\r\n  afterChange(){\r\n    let that =this\r\n    return function (changes,source){//修改数据事件\r\n      if(changes){\r\n        changes.forEach(change=>{\r\n          let folder = getRowInfoByIndex(change[0],that.getData(),that.getHot())\r\n          let sendFolder = changFolderInfo(folder)\r\n          that.changeDataList[folder.t_id] = sendFolder\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  beforeRemoveRow(){\r\n    let that = this\r\n    return function(index,amount) {//移除行事件\r\n      if(index!=null){\r\n        for(let i=0;i<amount;i++){\r\n          let folder = getRowInfoByIndex(index+i,that.getData(),that.getHot())\r\n          if (folder.cids && folder.cids.length>0){\r\n            swal({\r\n              title: \"提示\",\r\n              text: `第${index+i+1}行该组织有下级组织不可删！`,\r\n              button: \"确认\"\r\n            })\r\n            return false;\r\n          }else if(folder.count == 1){\r\n            swal({\r\n              title: \"提示\",\r\n              text: `第${index+i+1}行该组织有所属机组不可删！`,\r\n              button: \"确认\"\r\n            })\r\n            return false;\r\n          }else if(folder.operate ==1){\r\n            delete that.changeDataList[folder.t_id]\r\n          }else{\r\n            that.deleteIdList.push(folder.t_id)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  afterRemoveRow(){\r\n    let that = this\r\n    return function (){\r\n      // 删除组织\r\n      if(that.deleteIdList.length>0){\r\n         getApi.deleteFolder(that.deleteIdList,JSON.parse(sessionStorage.getItem('getTidList')))\r\n          .then(res=>{\r\n              that.deleteIdList.length=0;//请求过后将删除列表置空\r\n              if(res.msg==0){\r\n                swal({\r\n                  title: \"提示\",\r\n                  text: `删除组织成功！`,\r\n                  button: \"确认\"\r\n                })\r\n                    .then((value) => {\r\n                      that.reload()\r\n                    });\r\n              }\r\n              else if(res.msg==1){\r\n                  console.log('参数为空！')\r\n              }\r\n              else if(res.msg==2){\r\n                  console.log('后台运行错误！')\r\n              }\r\n              //删除组织，更新t_root\r\n            getApi.getAllTRoot(JSON.parse(sessionStorage.getItem('getTidList')))\r\n                .then(res=> {\r\n                  if (res !== undefined && res.msg !== undefined && res.msg === 0) {\r\n                    let tRoot = res.t_root;\r\n                    if(tRoot && tRoot.length){\r\n                      sessionStorage.setItem('tRootList',JSON.stringify(tRoot));\r\n                    }\r\n                    else{\r\n                      sessionStorage.setItem('tRootList',JSON.stringify([]));\r\n                    }\r\n                  }\r\n                }).catch(err => {\r\n              console.log(err)\r\n              sessionStorage.setItem('tRootList',JSON.stringify([]));\r\n            });\r\n          })\r\n             .catch(err=>{\r\n               console.log('请求错误' ,err)\r\n             })\r\n      }\r\n    }\r\n  }\r\n  //根据组织类型 改变可选组织项（新建组织的时候）\r\n  update_t_pName_sources(folder){\r\n    let t_ids = JSON.parse(sessionStorage.getItem('getTidList'))\r\n    let t_pName_sources =[]\r\n    this.folderArray.forEach(fol=>{\r\n      if(folder.t_root == '-1'){//选择组织类型为通用，则上级组织可随意选择\r\n        t_pName_sources.push(fol.t_name)\r\n      }\r\n      else{\r\n        if(fol.t_root == folder.t_root){\r\n          t_pName_sources.push(fol.t_name)\r\n        }\r\n      }\r\n    })\r\n    if(folder.t_root != '-1'){\r\n      if(t_ids.includes('0')){\r\n        t_pName_sources.unshift(\"顶级组织\")\r\n        folder.t_pName = \"顶级组织\"\r\n        folder.t_pid =-1\r\n      }else{\r\n        folder.t_pName = ''\r\n        folder.t_pid = ''\r\n      }\r\n    }\r\n    folder.t_pName_sources= t_pName_sources\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import {translateTree} from 'utils/utils'\r\n\r\nlet t_root_sources = {'-1':'通用','0':'风电','1':'水泥','2':'走行部','3':'油气井'}\r\n// let t_root_sources = {'0':'风电','1':'水泥'}\r\n\r\nexport function getFolderInfo(res){\r\n  let t_ids = JSON.parse(sessionStorage.getItem('getTidList'))\r\n  let folderList = {}\r\n  let folderArray =[];\r\n  let data\r\n  if(res === null || res===undefined){\r\n    console.log('数据错误！')\r\n  }\r\n  folderList[\"顶级组织\"]={\"t_id\":\"-1\"}\r\n  if(res!=undefined && res.length>0){\r\n    res.forEach(folder=>{\r\n      folderList[folder.t_name]={\"t_id\":folder.t_id}\r\n      if(folder.t_pName){ //有上级组织\r\n        folderList[folder.t_pName] = {\"t_id\" : folder.t_pid}\r\n      }\r\n      folderArray.push({\"t_root\":folder.t_root,\"t_name\":folder.t_name,\"t_id\":folder.t_id})\r\n    });\r\n    if(t_ids.includes('0')){\r\n      let folderTree = translateTree(res)\r\n      data = sort_folder(folderTree)\r\n    }else{ //不包含顶级组织的用户\r\n      data = sort_folder_2(res)\r\n    }\r\n\r\n    return [folderList,folderArray,data]\r\n  }\r\n  else{\r\n    return [folderList,folderArray,[]];\r\n  }\r\n}\r\n\r\nexport function createFolder(index){\r\n  let  folder = {\r\n    operate:1,\r\n    updateTime:0,//更新时间\r\n    t_id:index+\"A\",//组织uid\r\n    t_name:\"\",//组织名称\r\n    t_pid:\"\",//上级组织uid\r\n    t_pName:\"\",\r\n    t_pName_sources: [],\r\n    cids:[],\r\n    count:0,\r\n    t_root:\"0\",//0=根节点\r\n    t_root_val:\"风电\",\r\n    t_root_sources:Object.values(t_root_sources),\r\n    t_root_sources_key:Object.keys(t_root_sources),\r\n    baseInfo:{}\r\n  }\r\n  return folder\r\n}\r\n\r\n\r\nexport function changFolderInfo(folder) {//获取修改后的数据\r\n  let data={\r\n    updateTime:folder.updateTime,//更新时间\r\n    t_id:folder.t_id,//组织uid\r\n    t_name:folder.t_name,//组织名称\r\n    t_pid:folder.t_pid,//上级组织uid\r\n    t_pName:folder.t_pName,\r\n    t_root:Number(folder.t_root),//0=根节点\r\n    baseInfo:folder.baseInfo\r\n  };\r\n  return data\r\n}\r\n\r\n\r\n\r\n/* 这个方法完成的任务：1、按组织结构排序，2、不可选组织(自身，子组织，不同类型组织) */\r\nfunction  sort_folder(folderTree){\r\n  let data =[]\r\n  let t_pName_sources\r\n  //第一遍遍历\r\n  let sortFolder = function(folderArray){\r\n    folderArray.forEach(item=>{\r\n      t_pName_sources={}\r\n      //找道可选的上级组织\r\n      find_folderSource(item.t_id,folderTree,item.t_root)\r\n      let t_pid = item.t_pid || '-1'\r\n      let t_pName = item.t_pName || '顶级组织'\r\n      t_pName_sources = Object.values(t_pName_sources)\r\n      t_pName_sources.unshift('顶级组织')\r\n      data.push({\r\n        operate:0,\r\n        updateTime:item.updateTime,//更新时间\r\n        t_id:item.t_id,//组织uid\r\n        t_name:item.t_name,//组织名称\r\n        t_pid:t_pid,//上级组织uid\r\n        t_pName:t_pName, //动态\r\n        cids:item.cids,//子组织集合\r\n        t_pName_sources:t_pName_sources,\r\n        count:item.count, //如果是1表示有子组织\r\n        t_root:item.t_root,\r\n        t_root_val:t_root_sources[item.t_root],\r\n        t_root_sources:Object.values(t_root_sources),\r\n        t_root_sources_key:Object.keys(t_root_sources),\r\n        baseInfo:item.baseInfo\r\n      })\r\n      if(typeof item.children  == 'undefined' ||  item.children.length == 0){\r\n        return\r\n      }else{ //按照顺序排序\r\n        sortFolder(item.children)\r\n      }\r\n\r\n    })\r\n  }\r\n  let find_folderSource = function (t_id,folderList,t_root){\r\n    if(folderList.length == 0) {return}\r\n    folderList.forEach(fol=>{\r\n      if(fol.t_root!=t_root){\r\n        return\r\n      }\r\n      if(fol.t_id == t_id){\r\n        return\r\n      }\r\n      if(fol.children){\r\n        find_folderSource(t_id,fol.children,t_root)\r\n      }\r\n      t_pName_sources[fol.t_id] = fol.t_name\r\n    })\r\n  }\r\n  sortFolder(folderTree)\r\n  return data\r\n}\r\n\r\n/* 第二种排序方式，适用于其他用户 单个排序，除子组织之外的所有组织作为隶属组织的可选项*/\r\nfunction sort_folder_2(res){\r\n  let data =[]\r\n  res.forEach(item =>{\r\n    let t_pid = item.t_pid || '-1'\r\n    let t_pName = item.t_pName || '顶级组织'\r\n    let t_pName_sources = sort_p_sources(res,item.t_id,item.t_root)\r\n    if(!t_pName_sources.includes(t_pName)){\r\n      t_pName_sources.unshift(t_pName)\r\n    }\r\n    data.push({\r\n      operate:0,\r\n      updateTime:item.updateTime,//更新时间\r\n      t_id:item.t_id,//组织uid\r\n      t_name:item.t_name,//组织名称\r\n      t_pid:t_pid,//上级组织uid\r\n      t_pName:t_pName, //动态\r\n      cids:item.cids,//子组织集合\r\n      t_pName_sources:t_pName_sources,\r\n      count:item.count, //如果是1表示有子组织\r\n      t_root:item.t_root,\r\n      t_root_val:t_root_sources[item.t_root],\r\n      t_root_sources:Object.values(t_root_sources),\r\n      t_root_sources_key:Object.keys(t_root_sources),\r\n      baseInfo:item.baseInfo\r\n    })\r\n  })\r\n\r\n  return data\r\n}\r\n\r\nfunction sort_p_sources(res,t_id,t_root){\r\n  let  pids =[t_id]\r\n  let  t_pName_sources =[]\r\n  let  dataArray = [...res]\r\n  for(let i =0 ;i<pids.length;i++){\r\n    for(let j = dataArray.length-1;j>= 0;j--){\r\n      if(pids[i] == dataArray[j].t_pid){ //找到子级\r\n        pids.push(dataArray[j].t_id)\r\n        dataArray.splice(j, 1)\r\n      }\r\n    }\r\n  }\r\n  dataArray.forEach(item =>{\r\n    if(item.t_root == t_root){\r\n      if(item.t_id == t_id) return;\r\n      t_pName_sources.push(item.t_name)\r\n    }\r\n  })\r\n\r\n  return t_pName_sources\r\n}\r\n\r\n","export function addRows (hot,data,row){\r\n    if(row == -1){ //通过点击新建按钮进入的方法，默认在最后一行添加\r\n        row=0\r\n    }\r\n    hot.alter('insert_row',row);\r\n    reRenderSelectOption(hot,data,row,true)\r\n}\r\n\r\nexport function reRenderSelectOption(hot,data,newRow,isnew){ //重新渲染selectOption,让每个option     \r\n  let cellMeta  = hot.getCellMetaAtRow(0);\r\n  let rows = data.length\r\n  cellMeta.forEach(item=>{\r\n    if(item.prop == \"t_root_val\"){ //组织\r\n      if(isnew){ //新建行的时候的遍历 一条数据\r\n          hot.setCellMeta(newRow,item.col,\"selectOptions\",row=>{ return  data[hot.toPhysicalRow(row)].t_root_sources})\r\n      }else{\r\n        for(let i=0;i<=rows;i++){ //第一次创建hot时候的遍历 全部数据\r\n          hot.setCellMeta(i,item.col,\"selectOptions\",row=>{ return  data[hot.toPhysicalRow(row)].t_root_sources})\r\n        }\r\n      }\r\n      return\r\n    }\r\n    if(item.prop == \"t_pName\"){ //隶属组织\r\n      if(isnew){ //新建行的时候的遍历 一条数据\r\n          hot.setCellMeta(newRow,item.col,\"selectOptions\",row=>{ return  data[hot.toPhysicalRow(row)].t_pName_sources})\r\n      }else{\r\n        for(let i=0;i<=rows;i++){ //第一次创建hot时候的遍历 全部数据\r\n          hot.setCellMeta(i,item.col,\"selectOptions\",row=>{ return  data[hot.toPhysicalRow(row)].t_pName_sources})\r\n        }\r\n      }\r\n      return\r\n    }\r\n  })\r\n}"],"sourceRoot":""}